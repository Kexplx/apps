<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />

    <title>Text</title>
  </head>
  <body>
    <textarea class="ta"></textarea>

    <button class="btn-light-toggle">ðŸŒž</button>

    <script>
      let lightIsOn = false;

      const ta = document.querySelector(".ta");
      ta.focus();

      ta.addEventListener("keydown", function (e) {
        if (e.key == "Tab") {
          e.preventDefault();
          const start = this.selectionStart;
          const end = this.selectionEnd;
          this.value =
            this.value.substring(0, start) + "\t" + this.value.substring(end);
          this.selectionStart = this.selectionEnd = start + 1;
        }
      });

      const btnLightToggle = document.querySelector(".btn-light-toggle");
      btnLightToggle.addEventListener("click", () => {
        if (lightIsOn) {
          // Make it dark.
          document.body.classList.remove("lm");
          document.body.classList.add("dm");

          ta.classList.remove("lm");
          ta.classList.add("dm");

          btnLightToggle.textContent = "ðŸŒž";
        } else {
          // Make it bright.
          document.body.classList.remove("dm");
          document.body.classList.add("lm");

          ta.classList.remove("dm");
          ta.classList.add("lm");

          btnLightToggle.textContent = "ðŸŒ‘";
        }

        ta.focus();

        lightIsOn = !lightIsOn;
      });
    </script>
  </body>
</html>
